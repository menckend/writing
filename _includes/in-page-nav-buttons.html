<!--   In-page Table of Contents staging  -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})

});
</script>

<style>
details > summary {
  padding: 2px 6px;
  width: 15em;
  background-color: #347DBE;
  color: #ffffff;
  border: 1;
  cursor: pointer;
}
</style>

<!-- end of in-page TOC staging -->

                                    {% unless page.pagenav == false %}
                                    <!-- Get a list of all the page-numbers and their URLs for pages in the same library/document/chapter as the current page -->
                                    {% assign fullpages = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | where: 'chapnum', page.chapnum, | sort: 'pagenum' %}
                                    {% assign pagenums = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | where: 'chapnum', page.chapnum, | sort: 'pagenum' | map: 'pagenum' | uniq | compact %}
                                    {% assign pagecount = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | where: 'chapnum', page.chapnum, | sort: 'pagenum' | map: 'pagenum' | uniq | compact | size  %}
                                    {% if pagecount > 1 %}
                                        {% assign hostpagenum = page.pagenum | plus: 0  %}
                                        {% assign hostpagenumint = page.pagenum | to_i  %}
                                        {% assign oneless = '' | plus: 0 %}
                                        {% assign onemore = '' | plus: 0 %}
                                        {% assign oneless = hostpagenumint | minus: 1 %}
                                        {% assign onemore = hostpagenumint | plus: 1 %}
<div class="seriesContext">
                                        {% for pnumval in pagenums %}
                                            {% assign flpagenum = pnumval | plus: 0  %}
                                            {% if flpagenum == oneless %}
    <a href="{{fullpages[forloop.index0].url | remove: '/'}}"><button type="button" class="btn btn-primary">Previous Page </button></a>
                                            {% endif %}
                                            {% if flpagenum == onemore %}
    <a href="{{fullpages[forloop.index0].url | remove: '/'}}"><button type="button" class="btn btn-primary">Next Page </button></a>
                                            {% endif %}
                                        {% endfor %}
    <div class="btn-group">
        <button type="button" data-toggle="dropdown" class="btn btn-primary dropdown-toggle">Jump to page <span class="caret"></span></button>
            <ol class="dropdown-menu">
                                        {% for pnumval in pagenums %}
                                            {% assign flpagenum = pnumval | plus: 0  %}
                                            {%if flpagenum == hostpagenum %}
                <li class="disabled"> <strong>â†’</strong>{{fullpages[forloop.index0].pagenum}}.{{fullpages[forloop.index0].title}}</li>
                                            {% else %}
                <li>
                    <a href="{{fullpages[forloop.index0].url | remove: '/'}}">{{fullpages[forloop.index0].pagenum}}. {{fullpages[forloop.index0].title}}</a>
                </li>
                                            {% endif %}
                                        {% endfor %}
            </ol>
    </div>
</div>
                                    {% endif %}
                                  {% endunless %}


                                    {% unless page.toc == false %}
                                      {% assign tmparray = page.content | markdownify | split: '</h2>' | size %}
                                      {% if tmparray > 1 %}
<details><summary > Toggle Page TOC</summary><div id="toc"></div></details>
                                      {% endif %}
                                    {% endunless %}
    &nbsp;
