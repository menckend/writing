{% unless page.url contains 'index.html' %}

<p>{{page.doctitle}}</p>
<div class="mydocsidebar">
<div class="sidebar-inner">
<ul id="docnavsidebar" class="docnav">
      {% assign chapnums =  site.pages | where: 'libname', page.libname | where: 'docname', page.docname | sort: 'chapnum' | map: 'chapnum' | uniq | compact %}
      {% assign chapnames = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | sort: 'chapnum' | map: 'chapnam' | uniq | compact %}
      {% for chapnum in chapnums %}
            {% assign chapcnt = forloop.index0 %}
            {% assign pagenames = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | where: 'chapnum', chapnum | sort: 'pagenum' | map: 'title' | uniq | compact %}
            {% assign pageurls = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | where: 'chapnum', chapnum | sort: 'pagenum' | map: 'url' | uniq | compact %}
            <li class="level1 folderTitle><a>{{ chapnames[chapcnt] }}" href="#">{{ chapnames[chapcnt] }}</a>
                  <ul>
                        {% for apage in pagenames %}
                              {% if page.chapnum == chapnums[[chapcnt]] and page.title == apage %}
                                    <li class="level1items open"><a title="{{pagenames[forloop.index0]}}" href="{{pageurls[forloop.index0] | remove: "/"}}">{{pagenames[forloop.index0]}}--active</a></li>
                              {% else %}
                                    <li class="level1items"><a title="{{pagenames[forloop.index0]}}" href="{{pageurls[forloop.index0] | remove: "/"}}">{{pagenames[forloop.index0]}}</a></li>
                              {% endif %}
                        {% endfor %}
                  </ul>
            </li>
      {% endfor %}
</ul>
</div>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

{% endunless %}
