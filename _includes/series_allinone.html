
<!--
If there's only one page, don't bother creating the buttons
    If there's an earlier page, add the "previous" button.
    If there's a next page, add the "next" button.
    Add the "goto page" button
-->

<!-- Get a list of all the page-numbers and their URLs for pages in the same library/document/chapter as the current page -->
{% assign pagenums = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | where: 'chapnum', page.chapnum, | sort: 'pagenum' | map: 'pagenum' | uniq | compact %}
{% assign pagecount = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | where: 'chapnum', page.chapnum, | sort: 'pagenum' | map: 'pagenum' | uniq | compact | size  %}
{% assign pageurls = site.pages | where: 'libname', page.libname | where: 'docname', page.docname | where: 'chapnum', page.chapnum, | sort: 'pagenum' | map: 'url' | uniq | compact %}
{% assign doccnt = forloop.index0 %}

{% if pagecount > 1 %}

<div class="seriesContext">

{% assign seriesornot = site.page.series %}
{% if seriesornot != "series" %}
    {% assign anchor-series = page.series  %}
    {% assign page-weight-num = page.weight | plus: 0 %}
    {% assign page-weight-lessone = page-weight-num | minus: 1 %}
    {% assign page-weight-addone = page-weight-num | plus: 1 %}
    <a>
        {% for pg in site.pages %}
            {% if pg.series == anchor-series %}
                {% assign pg-weight-num = pg.weight | plus: 0 %}
                {% if pg-weight-num == page-weight-lessone %}
                    <a href="{{pg.url | remove: '/'}}"><button type="button" class="btn btn-primary">Previous Page </button></a>
                {% endif %}
                {% if pg-weight-num == page-weight-addone %}
                    <a href="{{pg.url | remove: '/'}}"><button type="button" class="btn btn-primary">Next Page </button></a>
                {% endif %}
            {% endif %}
        {% endfor %}
	</a>
    &nbsp;
    <div class="btn-group">
        <button type="button" data-toggle="dropdown" class="btn btn-primary dropdown-toggle">Jump to page <span class="caret"></span></button>
        <ol class="dropdown-menu">
            {% for pg in site.pages %}
            {% if pg.series == page.series %}
            {% if pg.url == page.url %}
            <li class="disabled"> <strong>â†’</strong>{{pg.weight}}. {{pg.title}}</li>
            {% else %}
            <li>
                <a href="{{pg.url | remove: '/'}}">{{pg.weight}}. {{pg.title}}</a>
            </li>
            {% endif %}
            {% endif %}
            {% endfor %}
        </ol>
    </div>
{% endif %}
</div>

{% endif %}
